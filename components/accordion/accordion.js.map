{"version":3,"file":"accordion.js","sourceRoot":"","sources":["accordion.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterContentInit,Input,Output,EventEmitter,ContentChildren,QueryList,\r\ntrigger,state,transition,style,animate} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {Header} from '../common/shared';\r\nimport {BlockableUI} from '../common/api';\r\n\r\n@Component({\r\n    selector: 'p-accordion',\r\n    template: `\r\n        <div [ngClass]=\"'ui-accordion ui-widget ui-helper-reset'\" [ngStyle]=\"style\" [class]=\"styleClass\">\r\n            <ng-content></ng-content>\r\n        </div>\r\n    `,\r\n})\r\nexport class Accordion implements BlockableUI {\r\n    \r\n    @Input() multiple: boolean;\r\n    \r\n    @Output() onClose: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() onOpen: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Input() style: any;\r\n    \r\n    @Input() styleClass: string;\r\n    \r\n    public tabs: AccordionTab[] = [];\r\n\r\n    constructor(public el: ElementRef) {}\r\n\r\n    addTab(tab: AccordionTab) {\r\n        this.tabs.push(tab);\r\n    }   \r\n    \r\n    getBlockableElement(): HTMLElementÂ {\r\n        return this.el.nativeElement.children[0];\r\n    } \r\n}\r\n\r\n@Component({\r\n    selector: 'p-accordionTab',\r\n    template: `\r\n        <div class=\"ui-accordion-header ui-state-default ui-corner-all\" [ngClass]=\"{'ui-state-active': selected,'ui-state-hover':hover&&!disabled,'ui-state-disabled':disabled}\"\r\n            (mouseenter)=\"hover = true\" (mouseleave)=\"hover=false\" (click)=\"toggle($event)\">\r\n            <span class=\"fa fa-fw\" [ngClass]=\"{'fa-caret-down': selected, 'fa-caret-right': !selected}\"></span>\r\n            <a href=\"#\" *ngIf=\"!hasHeaderFacet\" role=\"tab\" [attr.aria-expanded]=\"selected\" [attr.aria-selected]=\"selected\">{{header}}</a>\r\n            <a href=\"#\" *ngIf=\"hasHeaderFacet\" role=\"tab\" [attr.aria-expanded]=\"selected\" [attr.aria-selected]=\"selected\">\r\n                <ng-content select=\"header\"></ng-content>\r\n            </a>\r\n        </div>\r\n        <div class=\"ui-accordion-content-wrapper\" [@tabContent]=\"selected ? 'visible' : 'hidden'\" \r\n            [ngClass]=\"{'ui-accordion-content-wrapper-overflown': !selected||animating}\" role=\"tabpanel\" [attr.aria-hidden]=\"!selected\">\r\n            <div class=\"ui-accordion-content ui-widget-content\">\r\n                <ng-content></ng-content>\r\n            </div>\r\n        </div>\r\n    `,\r\n    animations: [\r\n        trigger('tabContent', [\r\n            state('hidden', style({\r\n                height: '0px'\r\n            })),\r\n            state('visible', style({\r\n                height: '*'\r\n            })),\r\n            transition('visible => hidden', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\r\n            transition('hidden => visible', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))\r\n        ])\r\n    ]\r\n})\r\nexport class AccordionTab {\r\n\r\n    @Input() header: string;\r\n\r\n    @Input() selected: boolean;\r\n\r\n    @Input() disabled: boolean;\r\n    \r\n    @Output() selectedChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    @ContentChildren(Header) headerFacet: QueryList<AccordionTab>;\r\n    \r\n    public animating: boolean;\r\n    \r\n    public hover: boolean;\r\n\r\n    constructor(public accordion: Accordion) {\r\n        this.accordion.addTab(this);\r\n    }\r\n\r\n    toggle(event) {\r\n        if(this.disabled) {\r\n            return false;\r\n        }\r\n        \r\n        this.animating = true;\r\n        let index = this.findTabIndex();\r\n\r\n        if(this.selected) {\r\n            this.selected = false;\r\n            this.accordion.onClose.emit({originalEvent: event, index: index});\r\n        }\r\n        else {\r\n            if(!this.accordion.multiple) {\r\n                for(var i = 0; i < this.accordion.tabs.length; i++) {\r\n                    this.accordion.tabs[i].selected = false;\r\n                    this.accordion.tabs[i].selectedChange.emit(false);\r\n                }\r\n            }\r\n\r\n            this.selected = true;\r\n            this.accordion.onOpen.emit({originalEvent: event, index: index});\r\n        }\r\n        \r\n        this.selectedChange.emit(this.selected);\r\n        \r\n        //TODO: Use onDone of animate callback instead with RC6\r\n        setTimeout(() => {\r\n            this.animating = false;\r\n        }, 400);\r\n\r\n        event.preventDefault();\r\n    }\r\n\r\n    findTabIndex() {\r\n        let index = -1;\r\n        for(var i = 0; i < this.accordion.tabs.length; i++) {\r\n            if(this.accordion.tabs[i] == this) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n    \r\n    get hasHeaderFacet(): boolean {\r\n        return this.headerFacet && this.headerFacet.length > 0;\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Accordion,AccordionTab],\r\n    declarations: [Accordion,AccordionTab]\r\n})\r\nexport class AccordionModule { }\r\n"]}