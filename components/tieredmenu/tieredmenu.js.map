{"version":3,"file":"tieredmenu.js","sourceRoot":"","sources":["tieredmenu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,OnDestroy,Input,Output,Renderer,EventEmitter} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {DomHandler} from '../dom/domhandler';\r\nimport {MenuItem} from '../common/api';\r\nimport {Location} from '@angular/common';\r\nimport {Router} from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'p-tieredMenuSub',\r\n    template: `\r\n        <ul [ngClass]=\"{'ui-helper-reset':root, 'ui-widget-content ui-corner-all ui-helper-clearfix ui-menu-child ui-shadow':!root}\" class=\"ui-menu-list\"\r\n            (click)=\"listClick($event)\">\r\n            <template ngFor let-child [ngForOf]=\"(root ? item : item.items)\">\r\n                <li #item [ngClass]=\"{'ui-menuitem ui-widget ui-corner-all':true,'ui-menu-parent':child.items,'ui-menuitem-active':item==activeItem}\"\r\n                    (mouseenter)=\"onItemMouseEnter($event, item, child)\" (mouseleave)=\"onItemMouseLeave($event)\">\r\n                    <a #link [href]=\"child.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" \r\n                        [ngClass]=\"{'ui-state-hover':link==activeLink&&!child.disabled,'ui-state-disabled':child.disabled}\" (click)=\"itemClick($event, child)\">\r\n                        <span class=\"ui-submenu-icon fa fa-fw fa-caret-right\" *ngIf=\"child.items\"></span>\r\n                        <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"child.icon\" [ngClass]=\"child.icon\"></span>\r\n                        <span class=\"ui-menuitem-text\">{{child.label}}</span>\r\n                    </a>\r\n                    <p-tieredMenuSub class=\"ui-submenu\" [item]=\"child\" *ngIf=\"child.items\"></p-tieredMenuSub>\r\n                </li>\r\n            </template>\r\n        </ul>\r\n    `,\r\n    providers: [DomHandler]\r\n})\r\nexport class TieredMenuSub {\r\n\r\n    @Input() item: MenuItem;\r\n    \r\n    @Input() root: boolean;\r\n    \r\n    constructor(public domHandler: DomHandler, public router: Router, public location: Location) {}\r\n    \r\n    activeItem: Element;\r\n    \r\n    activeLink: Element;\r\n            \r\n    onItemMouseEnter(event: Event, item: HTMLElement, menuitem: MenuItem) {\r\n        if(menuitem.disabled) {\r\n            return;\r\n        }\r\n        \r\n        this.activeItem = item;\r\n        this.activeLink = item.children[0];\r\n        let nextElement:  HTMLElement =  <HTMLElement> item.children[0].nextElementSibling;\r\n        if(nextElement) {\r\n            let sublist:  HTMLElement = <HTMLElement> nextElement.children[0];\r\n            sublist.style.zIndex = String(++DomHandler.zindex);\r\n                        \r\n            sublist.style.top = '0px';\r\n            sublist.style.left = this.domHandler.getOuterWidth(item.children[0]) + 'px';\r\n        }\r\n    }\r\n    \r\n    onItemMouseLeave(event: Event) {\r\n        this.activeItem = null;\r\n        this.activeLink = null;\r\n    }\r\n    \r\n    itemClick(event: Event, item: MenuItem)Â {\r\n        if(item.disabled) {\r\n            event.preventDefault();\r\n            return true;\r\n        }\r\n        \r\n        if(!item.url||item.routerLink) {\r\n            event.preventDefault();\r\n        }\r\n        \r\n        if(item.command) {\r\n            if(!item.eventEmitter) {\r\n                item.eventEmitter = new EventEmitter();\r\n                item.eventEmitter.subscribe(item.command);\r\n            }\r\n            \r\n            item.eventEmitter.emit({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n\r\n        if(item.routerLink) {\r\n            this.router.navigate(item.routerLink);\r\n        }\r\n    }\r\n    \r\n    listClick(event: Event) {\r\n        this.activeItem = null;\r\n        this.activeLink = null;\r\n    }\r\n}\r\n\r\n@Component({\r\n    selector: 'p-tieredMenu',\r\n    template: `\r\n        <div [ngClass]=\"{'ui-tieredmenu ui-menu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix':true,'ui-menu-dynamic ui-shadow':popup}\" \r\n            [class]=\"styleClass\" [ngStyle]=\"style\">\r\n            <p-tieredMenuSub [item]=\"model\" root=\"root\"></p-tieredMenuSub>\r\n        </div>\r\n    `,\r\n    providers: [DomHandler]\r\n})\r\nexport class TieredMenu implements AfterViewInit,OnDestroy {\r\n\r\n    @Input() model: MenuItem[];\r\n\r\n    @Input() popup: boolean;\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    container: any;\r\n    \r\n    documentClickListener: any;\r\n    \r\n    preventDocumentDefault: any;\r\n    \r\n    constructor(public el: ElementRef, public domHandler: DomHandler, public renderer: Renderer) {}\r\n\r\n    ngAfterViewInit() {\r\n        this.container = this.el.nativeElement.children[0];\r\n        \r\n        if(this.popup) {\r\n            this.documentClickListener = this.renderer.listenGlobal('body', 'click', () => {\r\n                if(!this.preventDocumentDefault) {\r\n                    this.hide();\r\n                }\r\n                this.preventDocumentDefault = false;\r\n            });\r\n        }\r\n    }\r\n    \r\n    toggle(event: Event) {\r\n        if(this.container.offsetParent)\r\n            this.hide();\r\n        else\r\n            this.show(event);\r\n            \r\n        this.preventDocumentDefault = true;\r\n    }\r\n    \r\n    show(event: Event) {\r\n        this.container.style.display = 'block';\r\n        this.domHandler.absolutePosition(this.container, event.target);\r\n        this.domHandler.fadeIn(this.container, 250);\r\n    }\r\n    \r\n    hide() {\r\n        this.container.style.display = 'none';\r\n    }\r\n\r\n    unsubscribe(item: any) {\r\n        if(item.eventEmitter) {\r\n            item.eventEmitter.unsubscribe();\r\n        }\r\n        \r\n        if(item.items) {\r\n            for(let childItem of item.items) {\r\n                this.unsubscribe(childItem);\r\n            }\r\n        }\r\n    }\r\n        \r\n    ngOnDestroy() {\r\n        if(this.popup) {\r\n            this.documentClickListener();\r\n        }\r\n        \r\n        if(this.model) {\r\n            for(let item of this.model) {\r\n                this.unsubscribe(item);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [TieredMenu],\r\n    declarations: [TieredMenu,TieredMenuSub]\r\n})\r\nexport class TieredMenuModule { }"]}