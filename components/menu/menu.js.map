{"version":3,"file":"menu.js","sourceRoot":"","sources":["menu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,OnDestroy,Input,Output,Renderer,EventEmitter} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {DomHandler} from '../dom/domhandler';\r\nimport {MenuItem} from '../common/api';\r\nimport {Router} from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'p-menu',\r\n    template: `\r\n        <div [ngClass]=\"{'ui-menu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix':true,'ui-menu-dynamic ui-shadow':popup}\" \r\n            [class]=\"styleClass\" [ngStyle]=\"style\" (click)=\"preventDocumentDefault=true\">\r\n            <ul class=\"ui-menu-list ui-helper-reset\">\r\n                <template ngFor let-submenu [ngForOf]=\"model\" *ngIf=\"hasSubMenu()\">\r\n                    <li class=\"ui-widget-header ui-corner-all\"><h3>{{submenu.label}}</h3></li>\r\n                    <li *ngFor=\"let item of submenu.items\" class=\"ui-menuitem ui-widget ui-corner-all\">\r\n                        <a #link [href]=\"item.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" \r\n                            [ngClass]=\"{'ui-state-hover':link==hoveredItem&&!item.disabled,'ui-state-disabled':item.disabled}\"\r\n                            (mouseenter)=\"hoveredItem=$event.target\" (mouseleave)=\"hoveredItem=null\" (click)=\"itemClick($event, item)\">\r\n                            <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                            <span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                        </a>\r\n                    </li>\r\n                </template>\r\n                <template ngFor let-item [ngForOf]=\"model\" *ngIf=\"!hasSubMenu()\">\r\n                    <li class=\"ui-menuitem ui-widget ui-corner-all\">\r\n                        <a #link [href]=\"item.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" \r\n                            [ngClass]=\"{'ui-state-hover':link==hoveredItem&&!item.disabled,'ui-state-disabled':item.disabled}\"\r\n                            (mouseenter)=\"hoveredItem=$event.target\" (mouseleave)=\"hoveredItem=null\" (click)=\"itemClick($event, item)\">\r\n                            <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                            <span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                        </a>\r\n                    </li>\r\n                </template>\r\n            </ul>\r\n        </div>\r\n    `,\r\n    providers: [DomHandler]\r\n})\r\nexport class Menu implements AfterViewInit,OnDestroy {\r\n\r\n    @Input() model: MenuItem[];\r\n\r\n    @Input() popup: boolean;\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    @Input() appendTo: any;\r\n    \r\n    container: any;\r\n    \r\n    documentClickListener: any;\r\n    \r\n    preventDocumentDefault: any;\r\n    \r\n    constructor(public el: ElementRef, public domHandler: DomHandler, public renderer: Renderer, public router: Router) {}\r\n\r\n    ngAfterViewInit() {\r\n        this.container = this.el.nativeElement.children[0];\r\n        \r\n        if(this.popup) {\r\n            if(this.appendTo) {\r\n                if(this.appendTo === 'body')\r\n                    document.body.appendChild(this.el.nativeElement);\r\n                else\r\n                    this.appendTo.appendChild(this.el.nativeElement);\r\n            }\r\n                \r\n            this.documentClickListener = this.renderer.listenGlobal('body', 'click', () => {\r\n                if(!this.preventDocumentDefault) {\r\n                    this.hide();\r\n                }\r\n                this.preventDocumentDefault = false;\r\n            });\r\n        }\r\n    }\r\n    \r\n    toggle(event) {\r\n        if(this.container.offsetParent)\r\n            this.hide();\r\n        else\r\n            this.show(event);\r\n            \r\n        this.preventDocumentDefault = true;\r\n    }\r\n    \r\n    show(event) {\r\n        let target = event.target;\r\n        if(target.parentElement.nodeName == 'BUTTON') {\r\n            target = target.parentElement;\r\n        }\r\n        \r\n        this.container.style.display = 'block';\r\n        this.domHandler.absolutePosition(this.container, target);\r\n        this.domHandler.fadeIn(this.container, 250);\r\n    }\r\n    \r\n    hide() {\r\n        this.container.style.display = 'none';\r\n    }\r\n    \r\n    itemClick(event, item: MenuItem)Â {\r\n        if(item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n        \r\n        if(!item.url||item.routerLink) {\r\n            event.preventDefault();\r\n        }\r\n        \r\n        if(item.command) {\r\n            if(!item.eventEmitter) {\r\n                item.eventEmitter = new EventEmitter();\r\n                item.eventEmitter.subscribe(item.command);\r\n            }\r\n            \r\n            item.eventEmitter.emit({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n        \r\n        if(this.popup) {\r\n            this.hide();\r\n        }\r\n        \r\n        if(item.routerLink) {\r\n            this.router.navigate(item.routerLink);\r\n        }\r\n    }\r\n    \r\n    ngOnDestroy() {\r\n        if(this.popup) {\r\n            this.documentClickListener();\r\n            \r\n            if(this.appendTo && this.appendTo === 'body') {\r\n                document.body.removeChild(this.el.nativeElement);\r\n            }\r\n        }\r\n        \r\n        if(this.model) {\r\n            for(let item of this.model) {\r\n                this.unsubscribe(item);\r\n            }\r\n        }\r\n    }\r\n    \r\n    hasSubMenu(): boolean {\r\n        if(this.model) {\r\n            for(var item of this.model) {\r\n                if(item.items) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    unsubscribe(item: any) {\r\n        if(item.eventEmitter) {\r\n            item.eventEmitter.unsubscribe();\r\n        }\r\n        \r\n        if(item.items) {\r\n            for(let childItem of item.items) {\r\n                this.unsubscribe(childItem);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Menu],\r\n    declarations: [Menu]\r\n})\r\nexport class MenuModule { }"]}