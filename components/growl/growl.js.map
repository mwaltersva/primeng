{"version":3,"file":"growl.js","sourceRoot":"","sources":["growl.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAmH,eAAe,CAAC,CAAA;AACnI,uBAA2B,iBAAiB,CAAC,CAAA;AAE7C,2BAAyB,mBAAmB,CAAC,CAAA;AAyB7C;IAoBI,eAAmB,EAAc,EAAS,UAAsB,EAAE,OAAwB;QAAvE,OAAE,GAAF,EAAE,CAAY;QAAS,eAAU,GAAV,UAAU,CAAY;QAlBvD,WAAM,GAAY,KAAK,CAAC;QAExB,SAAI,GAAW,IAAI,CAAC;QAiBzB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,MAAM,GAAG,uBAAU,CAAC,MAAM,CAAC;IACpC,CAAC;IAED,+BAAe,GAAf;QACI,IAAI,CAAC,SAAS,GAAoB,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC;IAC5E,CAAC;IAED,yBAAS,GAAT;QAAA,iBAoBC;QAnBG,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3C,EAAE,CAAA,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAA,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;YACxC,CAAC;YACD,IAAI,CAAC,EAAE,CAAA,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;gBACtC,IAAI,CAAC,MAAM,GAAG,EAAE,uBAAU,CAAC,MAAM,CAAC;gBAClC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;gBAE5C,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBACd,EAAE,CAAA,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;wBACd,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBAC/B,CAAC;oBACD,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;wBACtB,KAAI,CAAC,SAAS,EAAE,CAAC;oBACrB,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAClB,CAAC;YACL,CAAC;QACL,CAAC;IACL,CAAC;IAED,sBAAM,GAAN,UAAO,GAAY,EAAE,KAAU;QAA/B,iBASC;QARG,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAEpC,UAAU,CAAC;YACP,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;QACrD,CAAC,EAAE,GAAG,CAAC,CAAC;IAEZ,CAAC;IAED,yBAAS,GAAT;QAAA,iBAUC;QATG,EAAE,CAAA,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;YAEnC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;YAE7C,UAAU,CAAC;gBACP,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAC5C,CAAC,EAAE,GAAG,CAAC,CAAC;QACZ,CAAC;IACL,CAAC;IAED,gCAAgB,GAAhB,UAAiB,GAAY;QACzB,IAAI,KAAK,GAAW,CAAC,CAAC,CAAC;QAEvB,EAAE,CAAA,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YACjC,GAAG,CAAA,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACzC,EAAE,CAAA,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;oBACtB,KAAK,GAAG,CAAC,CAAC;oBACV,KAAK,CAAC;gBACV,CAAC;YACL,CAAC;QACL,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED,2BAAW,GAAX;QACI,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACd,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/B,CAAC;IACL,CAAC;IA3FD;QAAC,YAAK,EAAE;;yCAAA;IAER;QAAC,YAAK,EAAE;;uCAAA;IAER;QAAC,YAAK,EAAE;;wCAAA;IAER;QAAC,gBAAS,CAAC,WAAW,CAAC;;qDAAA;IA/B3B;QAAC,gBAAS,CAAC;YACP,QAAQ,EAAE,SAAS;YACnB,QAAQ,EAAE,ivCAkBT;YACD,SAAS,EAAE,CAAC,uBAAU,CAAC;SAC1B,CAAC;;aAAA;IAgGF,YAAC;AAAD,CAAC,AA/FD,IA+FC;AA/FY,aAAK,QA+FjB,CAAA;AAOD;IAAA;IAA2B,CAAC;IAL5B;QAAC,eAAQ,CAAC;YACN,OAAO,EAAE,CAAC,qBAAY,CAAC;YACvB,OAAO,EAAE,CAAC,KAAK,CAAC;YAChB,YAAY,EAAE,CAAC,KAAK,CAAC;SACxB,CAAC;;mBAAA;IACyB,kBAAC;AAAD,CAAC,AAA5B,IAA4B;AAAf,mBAAW,cAAI,CAAA","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,DoCheck,OnDestroy,Input,Output,IterableDiffers,ViewChild} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {Message} from '../common/api';\r\nimport {DomHandler} from '../dom/domhandler';\r\n\r\n@Component({\r\n    selector: 'p-growl',\r\n    template: `\r\n        <div #container class=\"ui-growl ui-widget\" [style.zIndex]=\"zIndex\">\r\n            <div #msgel *ngFor=\"let msg of value\" class=\"ui-growl-item-container ui-state-highlight ui-corner-all ui-shadow\" aria-live=\"polite\"\r\n                [ngClass]=\"{'ui-growl-message-info':msg.severity == 'info','ui-growl-message-warn':msg.severity == 'warn',\r\n                    'ui-growl-message-error':msg.severity == 'error','ui-growl-message-success':msg.severity == 'success'}\">\r\n                <div class=\"ui-growl-item\">\r\n                     <div class=\"ui-growl-icon-close fa fa-close\" (click)=\"remove(msg,msgel)\"></div>\r\n                     <span class=\"ui-growl-image fa fa-2x\"\r\n                        [ngClass]=\"{'fa-info-circle':msg.severity == 'info','fa-warning':msg.severity == 'warn',\r\n                                'fa-close':msg.severity == 'error','fa-check':msg.severity == 'success'}\"></span>\r\n                     <div class=\"ui-growl-message\">\r\n                        <span class=\"ui-growl-title\">{{msg.summary}}</span>\r\n                        <p>{{msg.detail}}</p>\r\n                     </div>\r\n                     <div style=\"clear: both;\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    providers: [DomHandler]\r\n})\r\nexport class Growl implements AfterViewInit,DoCheck,OnDestroy {\r\n\r\n    @Input() sticky: boolean = false;\r\n\r\n    @Input() life: number = 3000;\r\n\r\n    @Input() value: Message[];\r\n    \r\n    @ViewChild('container') containerViewChild: ElementRef;\r\n        \r\n    differ: any;\r\n    \r\n    zIndex: number;\r\n    \r\n    container: HTMLDivElement;\r\n    \r\n    stopDoCheckPropagation: boolean;\r\n    \r\n    timeout: any;\r\n        \r\n    constructor(public el: ElementRef, public domHandler: DomHandler, differs: IterableDiffers) {\r\n        this.differ = differs.find([]).create(null);\r\n        this.zIndex = DomHandler.zindex;\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.container = <HTMLDivElement> this.containerViewChild.nativeElement;\r\n    }\r\n    \r\n    ngDoCheck() {\r\n        let changes = this.differ.diff(this.value);\r\n        if(changes && this.container) {\r\n            if(this.stopDoCheckPropagation) {\r\n                this.stopDoCheckPropagation = false;\r\n            }\r\n            else if(this.value && this.value.length) {\r\n                this.zIndex = ++DomHandler.zindex;\r\n                this.domHandler.fadeIn(this.container, 250);\r\n                \r\n                if(!this.sticky) {\r\n                    if(this.timeout) {\r\n                        clearTimeout(this.timeout);\r\n                    }\r\n                    this.timeout = setTimeout(() => {\r\n                        this.removeAll();\r\n                    }, this.life);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    remove(msg: Message, msgel: any) {\r\n        this.stopDoCheckPropagation = true;\r\n        \r\n        this.domHandler.fadeOut(msgel, 250);\r\n        \r\n        setTimeout(() => {\r\n            this.value.splice(this.findMessageIndex(msg), 1);\r\n        }, 250);\r\n        \r\n    }\r\n    \r\n    removeAll() {\r\n        if(this.value && this.value.length) {\r\n            this.stopDoCheckPropagation = true;\r\n            \r\n            this.domHandler.fadeOut(this.container, 250);\r\n            \r\n            setTimeout(() => {\r\n                this.value.splice(0, this.value.length);\r\n            }, 250);\r\n        }\r\n    }\r\n    \r\n    findMessageIndex(msg: Message) {\r\n        let index: number = -1;\r\n\r\n        if(this.value && this.value.length) {\r\n            for(let i = 0; i  < this.value.length; i++) {\r\n                if(this.value[i] == msg) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return index;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if(!this.sticky) {\r\n            clearTimeout(this.timeout);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Growl],\r\n    declarations: [Growl]\r\n})\r\nexport class GrowlModule { }"]}