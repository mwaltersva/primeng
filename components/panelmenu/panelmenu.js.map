{"version":3,"file":"panelmenu.js","sourceRoot":"","sources":["panelmenu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,OnDestroy,Input,EventEmitter,trigger,state,transition,style,animate} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {MenuItem} from '../common/api';\r\nimport {Location} from '@angular/common';\r\nimport {Router} from '@angular/router';\r\n\r\nexport class BasePanelMenuItem {\r\n    \r\n    constructor(public router: Router) {}\r\n    \r\n    handleClick(event, item) {\r\n        if(item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n        \r\n        item.expanded = !item.expanded;\r\n        event.preventDefault();\r\n        \r\n        if(!item.url||item.routerLink) {\r\n            event.preventDefault();\r\n        }\r\n                   \r\n        if(item.command) {\r\n            if(!item.eventEmitter) {\r\n                item.eventEmitter = new EventEmitter();\r\n                item.eventEmitter.subscribe(item.command);\r\n            }\r\n            \r\n            item.eventEmitter.emit({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n        \r\n        if(item.routerLink) {\r\n            this.router.navigate(item.routerLink);\r\n        }\r\n    }\r\n}\r\n\r\n@Component({\r\n    selector: 'p-panelMenuSub',\r\n    template: `\r\n        <ul class=\"ui-menu-list ui-helper-reset\" [style.display]=\"expanded ? 'block' : 'none'\">\r\n            <li *ngFor=\"let child of item.items\" class=\"ui-menuitem ui-corner-all\" [ngClass]=\"{'ui-menu-parent':child.items}\">\r\n                <a #link [href]=\"child.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" \r\n                    [ngClass]=\"{'ui-menuitem-link-hasicon':child.icon&&child.items,'ui-state-hover':(hoveredLink==link&&!child.disabled),'ui-state-disabled':child.disabled}\" \r\n                    (click)=\"handleClick($event,child)\"\r\n                    (mouseenter)=\"hoveredLink=link\" (mouseleave)=\"hoveredLink=null\">\r\n                    <span class=\"ui-panelmenu-icon fa fa-fw\" [ngClass]=\"{'fa-caret-right':!child.expanded,'fa-caret-down':child.expanded}\" *ngIf=\"child.items\"></span>\r\n                    <span class=\"ui-menuitem-icon fa fa-fw\" [ngClass]=\"child.icon\" *ngIf=\"child.icon\"></span>\r\n                    <span class=\"ui-menuitem-text\">{{child.label}}</span>\r\n                </a>\r\n                <p-panelMenuSub [item]=\"child\" [expanded]=\"child.expanded\" *ngIf=\"child.items\"></p-panelMenuSub>\r\n            </li>\r\n        </ul>\r\n    `\r\n})\r\nexport class PanelMenuSub extends BasePanelMenuItem {\r\n    \r\n    @Input() item: MenuItem;\r\n    \r\n    @Input() expanded: boolean;\r\n    \r\n    constructor(router: Router) {\r\n        super(router);\r\n    }\r\n}\r\n\r\n@Component({\r\n    selector: 'p-panelMenu',\r\n    template: `\r\n        <div [class]=\"styleClass\" [ngStyle]=\"style\" [ngClass]=\"'ui-panelmenu ui-widget'\">\r\n            <div *ngFor=\"let item of model;let f=first;let l=last;\" class=\"ui-panelmenu-panel\">\r\n                <div tabindex=\"0\" [ngClass]=\"{'ui-widget ui-panelmenu-header ui-state-default':true,'ui-corner-top':f,'ui-corner-bottom':l&&!item.expanded,\r\n                    'ui-state-active':item.expanded,'ui-state-hover':(item == hoveredItem && !item.disabled),'ui-state-disabled':item.disabled}\">\r\n                    <a [href]=\"item.url||'#'\" [ngClass]=\"{'ui-panelmenu-headerlink-hasicon':item.icon}\"\r\n                        (mouseenter)=\"hoveredItem=item\" (mouseleave)=\"hoveredItem=null\" (click)=\"handleClick($event,item)\">\r\n                        <span *ngIf=\"item.items\" class=\"ui-panelmenu-icon fa fa-fw\" [ngClass]=\"{'fa-caret-right':!item.expanded,'fa-caret-down':item.expanded}\"></span>\r\n                        <span class=\"ui-menuitem-icon fa fa-fw\" [ngClass]=\"item.icon\" *ngIf=\"item.icon\"></span>\r\n                        <span>{{item.label}}</span>\r\n                    </a>\r\n                </div>\r\n                <div *ngIf=\"item.items\" class=\"ui-panelmenu-content-wrapper\" [@rootItem]=\"item.expanded ? 'visible' : 'hidden'\" \r\n                    [ngClass]=\"{'ui-panelmenu-content-wrapper-overflown': !item.expanded||animating}\">\r\n                    <div class=\"ui-panelmenu-content ui-widget-content\">\r\n                        <p-panelMenuSub [item]=\"item\" [expanded]=\"true\"></p-panelMenuSub>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    animations: [\r\n        trigger('rootItem', [\r\n            state('hidden', style({\r\n                height: '0px'\r\n            })),\r\n            state('visible', style({\r\n                height: '*'\r\n            })),\r\n            transition('visible => hidden', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\r\n            transition('hidden => visible', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))\r\n        ])\r\n    ]\r\n})\r\nexport class PanelMenu extends BasePanelMenuItem {\r\n    \r\n    @Input() model: MenuItem[];\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    public animating: boolean;\r\n    \r\n    constructor(router: Router) {\r\n        super(router);\r\n    }\r\n            \r\n    unsubscribe(item: any) {\r\n        if(item.eventEmitter) {\r\n            item.eventEmitter.unsubscribe();\r\n        }\r\n        \r\n        if(item.items) {\r\n            for(let childItem of item.items) {\r\n                this.unsubscribe(childItem);\r\n            }\r\n        }\r\n    }\r\n            \r\n    ngOnDestroy() {        \r\n        if(this.model) {\r\n            for(let item of this.model) {\r\n                this.unsubscribe(item);\r\n            }\r\n        }\r\n    }\r\n    \r\n    handleClick(event, item) {\r\n        this.animating = true;\r\n        super.handleClick(event, item);\r\n        //TODO: Use onDone of animate callback instead with RC6\r\n        setTimeout(() => {\r\n            this.animating = false;\r\n        }, 400);\r\n    }\r\n\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [PanelMenu],\r\n    declarations: [PanelMenu,PanelMenuSub]\r\n})\r\nexport class PanelMenuModule { }\r\n"]}