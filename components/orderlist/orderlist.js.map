{"version":3,"file":"orderlist.js","sourceRoot":"","sources":["orderlist.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewChecked,Input,Output,ContentChild,TemplateRef,EventEmitter} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {ButtonModule} from '../button/button';\r\nimport {SharedModule} from '../common/shared';\r\nimport {DomHandler} from '../dom/domhandler';\r\n\r\n@Component({\r\n    selector: 'p-orderList',\r\n    template: `\r\n        <div [ngClass]=\"{'ui-orderlist ui-grid ui-widget':true,'ui-grid-responsive':responsive}\" [ngStyle]=\"style\" [class]=\"styleClass\">\r\n            <div class=\"ui-grid-row\">\r\n                <div class=\"ui-orderlist-controls ui-grid-col-2\">\r\n                    <button type=\"button\" pButton icon=\"fa-angle-up\" (click)=\"moveUp($event,listelement)\"></button>\r\n                    <button type=\"button\" pButton icon=\"fa-angle-double-up\" (click)=\"moveTop($event,listelement)\"></button>\r\n                    <button type=\"button\" pButton icon=\"fa-angle-down\" (click)=\"moveDown($event,listelement)\"></button>\r\n                    <button type=\"button\" pButton icon=\"fa-angle-double-down\" (click)=\"moveBottom($event,listelement)\"></button>\r\n                </div>\r\n                <div class=\"ui-grid-col-10\">\r\n                    <div class=\"ui-orderlist-caption ui-widget-header ui-corner-top\" *ngIf=\"header\">{{header}}</div>\r\n                    <ul #listelement class=\"ui-widget-content ui-orderlist-list ui-corner-bottom\" [ngStyle]=\"listStyle\">\r\n                        <li *ngFor=\"let item of value\" \r\n                            [ngClass]=\"{'ui-orderlist-item':true,'ui-state-hover':(hoveredItem==item),'ui-state-highlight':isSelected(item)}\"\r\n                            (mouseenter)=\"hoveredItem=item\" (mouseleave)=\"hoveredItem=null\" (click)=\"onItemClick($event,item)\">\r\n                            <template [pTemplateWrapper]=\"itemTemplate\" [item]=\"item\"></template>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    providers: [DomHandler]\r\n})\r\nexport class OrderList implements AfterViewChecked {\r\n\r\n    @Input() value: any[];\r\n    \r\n    @Input() header: string;\r\n    \r\n    @Input() style: any;\r\n        \r\n    @Input() styleClass: string;\r\n    \r\n    @Input() listStyle: any;\r\n    \r\n    @Input() responsive: boolean;\r\n    \r\n    @Output() onReorder: EventEmitter<any> = new EventEmitter();\r\n\r\n    @ContentChild(TemplateRef) itemTemplate: TemplateRef<any>;\r\n    \r\n    hoveredItem: any;\r\n    \r\n    selectedItems: any[];\r\n    \r\n    movedUp: boolean;\r\n    \r\n    movedDown: boolean;\r\n        \r\n    listContainer: any;\r\n        \r\n    constructor(public el: ElementRef, public domHandler: DomHandler) {}\r\n         \r\n    ngAfterViewInit() {\r\n        this.listContainer = this.domHandler.findSingle(this.el.nativeElement, 'ul.ui-orderlist-list');\r\n    }\r\n         \r\n    ngAfterViewChecked() {\r\n        if(this.movedUp||this.movedDown) {\r\n            let listItems = this.domHandler.find(this.listContainer, 'li.ui-state-highlight');\r\n            let listItem;\r\n            \r\n            if(this.movedUp)\r\n                listItem = listItems[0];\r\n            else\r\n                listItem = listItems[listItems.length - 1];\r\n            \r\n            this.domHandler.scrollInView(this.listContainer, listItem);\r\n            this.movedUp = false;\r\n            this.movedDown = false;\r\n        }\r\n    }\r\n                \r\n    onItemClick(event, item) {\r\n        let metaKey = (event.metaKey||event.ctrlKey);\r\n        let index = this.findIndexInList(item, this.selectedItems);\r\n        let selected = (index != -1);\r\n        \r\n        if(selected && metaKey) {\r\n            this.selectedItems.splice(index, 1);\r\n        }\r\n        else {\r\n            this.selectedItems = (metaKey) ? this.selectedItems||[] : [];            \r\n            this.selectedItems.push(item);\r\n        }\r\n    }\r\n    \r\n    isSelected(item: any) {\r\n        return this.findIndexInList(item, this.selectedItems) != -1;\r\n    }\r\n        \r\n    findIndexInList(item: any, list: any): number {\r\n        let index: number = -1;\r\n        \r\n        if(list) {\r\n            for(let i = 0; i < list.length; i++) {\r\n                if(list[i] == item) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return index;\r\n    }\r\n\r\n    moveUp(event,listElement) {\r\n        if(this.selectedItems) {\r\n            for(let i = 0; i < this.selectedItems.length; i++) {\r\n                let selectedItem = this.selectedItems[i];\r\n                let selectedItemIndex: number = this.findIndexInList(selectedItem, this.value);\r\n\r\n                if(selectedItemIndex != 0) {\r\n                    let movedItem = this.value[selectedItemIndex];\r\n                    let temp = this.value[selectedItemIndex-1];\r\n                    this.value[selectedItemIndex-1] = movedItem;\r\n                    this.value[selectedItemIndex] = temp;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            this.movedUp = true;\r\n            this.onReorder.emit(event);\r\n        }\r\n    }\r\n    \r\n    moveTop(event,listElement) {\r\n        if(this.selectedItems) {\r\n            for(let i = 0; i < this.selectedItems.length; i++) {\r\n                let selectedItem = this.selectedItems[i];\r\n                let selectedItemIndex: number = this.findIndexInList(selectedItem, this.value);\r\n\r\n                if(selectedItemIndex != 0) {\r\n                    let movedItem = this.value.splice(selectedItemIndex,1)[0];\r\n                    this.value.unshift(movedItem);\r\n                    listElement.scrollTop = 0;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            this.onReorder.emit(event);\r\n            listElement.scrollTop = 0;\r\n        }\r\n    }\r\n    \r\n    moveDown(event,listElement) {\r\n        if(this.selectedItems) {\r\n            for(let i = this.selectedItems.length - 1; i >= 0; i--) {\r\n                let selectedItem = this.selectedItems[i];\r\n                let selectedItemIndex: number = this.findIndexInList(selectedItem, this.value);\r\n\r\n                if(selectedItemIndex != (this.value.length - 1)) {\r\n                    let movedItem = this.value[selectedItemIndex];\r\n                    let temp = this.value[selectedItemIndex+1];\r\n                    this.value[selectedItemIndex+1] = movedItem;\r\n                    this.value[selectedItemIndex] = temp;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            this.movedDown = true;\r\n            this.onReorder.emit(event);\r\n        }\r\n    }\r\n    \r\n    moveBottom(event,listElement) {\r\n        if(this.selectedItems) {\r\n            for(let i = this.selectedItems.length - 1; i >= 0; i--) {\r\n                let selectedItem = this.selectedItems[i];\r\n                let selectedItemIndex: number = this.findIndexInList(selectedItem, this.value);\r\n\r\n                if(selectedItemIndex != (this.value.length - 1)) {\r\n                    let movedItem = this.value.splice(selectedItemIndex,1)[0];\r\n                    this.value.push(movedItem);\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            this.onReorder.emit(event);\r\n            listElement.scrollTop = listElement.scrollHeight;\r\n        }\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule,ButtonModule,SharedModule],\r\n    exports: [OrderList,SharedModule],\r\n    declarations: [OrderList]\r\n})\r\nexport class OrderListModule { }"]}